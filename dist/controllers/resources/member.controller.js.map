{
  "version": 3,
  "sources": ["../../../src/controllers/resources/member.controller.ts"],
  "sourcesContent": ["import { Member } from '../../models/member'\nimport { errorResponse, successResponse } from '../../utils/responseFormat'\nimport { Request, Response } from 'express'\nimport { CallbackError, Document } from 'mongoose'\nasync function get (req: Request, res: Response) {\n  try {\n    const member = await Member.findById(req.params.id).populate('activityHistory')\n    return res.status(200).json(successResponse(member, 'Member found'))\n  } catch (error) {\n    return res.status(500).json(errorResponse('Internal server error'))\n  }\n}\n\nasync function create (req: Request, res: Response) {\n  try {\n    const member = await Member.create(req.body)\n    return res.status(200).json(successResponse(member, 'Member created'))\n  } catch (error) {\n    return res.status(500).json(errorResponse('Internal server error'))\n  }\n}\n\nasync function update (req: Request, res: Response) {\n  try {\n    const member = await Member.findByIdAndUpdate(req.params.id, req.body, { new: true })\n    return res.status(200).json(successResponse(member, 'Member updated'))\n  } catch (error) {\n    return res.status(500).json(errorResponse('Internal server error'))\n  }\n}\n\nasync function remove (req: Request, res: Response) {\n  Member.findByIdAndDelete(req.params.id, (err: CallbackError, doc: Document) => {\n    if (err != null) {\n      return res.status(500).json(errorResponse('Internal server error'))\n    }\n    if (!doc) {\n      return res.status(404).json(errorResponse('Member not found'))\n    }\n    return res.status(200).json(successResponse(doc, 'Member deleted'))\n  })\n}\n\nasync function assignTask (req: Request, res: Response) {\n  try {\n    // Check if task has already been assigned\n    const member = await Member.findByIdAndUpdate(\n      req.params.id,\n      { $addToSet: { taskAssigned: req.body.taskId } },\n\n      { new: true }\n    )\n    return res.status(200).json(successResponse(member, 'Task assigned'))\n  } catch (error) {\n    return res.status(500).json(errorResponse('Internal server error'))\n  }\n}\n\nasync function joinProject (req: Request, res: Response) {\n  try {\n    // Check if project has already been added\n    const member = await Member.findByIdAndUpdate(\n      req.params.id,\n      { $addToSet: { projectParticipated: req.body.projectId } },\n      { new: true }\n    )\n    return res.status(200).json(successResponse(member, 'Project joined'))\n  } catch (error) {\n    return res.status(500).json(errorResponse('Internal server error'))\n  }\n}\n\nexport {\n  get,\n  create,\n  update,\n  remove,\n  assignTask,\n  joinProject\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAuB;AACvB,4BAA+C;AAG/C,eAAe,IAAK,KAAc,KAAe;AAC/C,MAAI;AACF,UAAM,SAAS,MAAM,qBAAO,SAAS,IAAI,OAAO,EAAE,EAAE,SAAS,iBAAiB;AAC9E,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,uCAAgB,QAAQ,cAAc,CAAC;AAAA,EACrE,SAAS,OAAP;AACA,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,qCAAc,uBAAuB,CAAC;AAAA,EACpE;AACF;AAEA,eAAe,OAAQ,KAAc,KAAe;AAClD,MAAI;AACF,UAAM,SAAS,MAAM,qBAAO,OAAO,IAAI,IAAI;AAC3C,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,uCAAgB,QAAQ,gBAAgB,CAAC;AAAA,EACvE,SAAS,OAAP;AACA,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,qCAAc,uBAAuB,CAAC;AAAA,EACpE;AACF;AAEA,eAAe,OAAQ,KAAc,KAAe;AAClD,MAAI;AACF,UAAM,SAAS,MAAM,qBAAO,kBAAkB,IAAI,OAAO,IAAI,IAAI,MAAM,EAAE,KAAK,KAAK,CAAC;AACpF,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,uCAAgB,QAAQ,gBAAgB,CAAC;AAAA,EACvE,SAAS,OAAP;AACA,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,qCAAc,uBAAuB,CAAC;AAAA,EACpE;AACF;AAEA,eAAe,OAAQ,KAAc,KAAe;AAClD,uBAAO,kBAAkB,IAAI,OAAO,IAAI,CAAC,KAAoB,QAAkB;AAC7E,QAAI,OAAO,MAAM;AACf,aAAO,IAAI,OAAO,GAAG,EAAE,SAAK,qCAAc,uBAAuB,CAAC;AAAA,IACpE;AACA,QAAI,CAAC,KAAK;AACR,aAAO,IAAI,OAAO,GAAG,EAAE,SAAK,qCAAc,kBAAkB,CAAC;AAAA,IAC/D;AACA,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,uCAAgB,KAAK,gBAAgB,CAAC;AAAA,EACpE,CAAC;AACH;AAEA,eAAe,WAAY,KAAc,KAAe;AACtD,MAAI;AAEF,UAAM,SAAS,MAAM,qBAAO;AAAA,MAC1B,IAAI,OAAO;AAAA,MACX,EAAE,WAAW,EAAE,cAAc,IAAI,KAAK,OAAO,EAAE;AAAA,MAE/C,EAAE,KAAK,KAAK;AAAA,IACd;AACA,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,uCAAgB,QAAQ,eAAe,CAAC;AAAA,EACtE,SAAS,OAAP;AACA,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,qCAAc,uBAAuB,CAAC;AAAA,EACpE;AACF;AAEA,eAAe,YAAa,KAAc,KAAe;AACvD,MAAI;AAEF,UAAM,SAAS,MAAM,qBAAO;AAAA,MAC1B,IAAI,OAAO;AAAA,MACX,EAAE,WAAW,EAAE,qBAAqB,IAAI,KAAK,UAAU,EAAE;AAAA,MACzD,EAAE,KAAK,KAAK;AAAA,IACd;AACA,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,uCAAgB,QAAQ,gBAAgB,CAAC;AAAA,EACvE,SAAS,OAAP;AACA,WAAO,IAAI,OAAO,GAAG,EAAE,SAAK,qCAAc,uBAAuB,CAAC;AAAA,EACpE;AACF;",
  "names": []
}
